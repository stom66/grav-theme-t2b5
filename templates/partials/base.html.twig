{% set theme_config = attribute(config.themes, config.system.pages.theme) %}

{% set navbar = theme_var('navbar') %}
{% set footer = theme_var('footer') %}
<!DOCTYPE html>
<html lang="{{ (grav.language.getActive ?: grav.config.site.default_lang)|e }}" {% if footer.sticky %} class="h-100"{% endif %}>
    <head>
        {% block head %}
            {% include 'meta/metadata.html.twig' %}

            {% include 'meta/css.html.twig' %}

            {% include 'meta/js.html.twig' %}
        {% endblock head %}

        {% block assets deferred %}
            {{ assets.css()|raw }}
            {{ assets.js()|raw }}
        {% endblock %}
    </head>

    <!-- Neck -->

    <body class="
        {% block body_classes %}
            {{ page.header.body_classes }}
            {% if footer.sticky %} 
                d-flex flex-column h-100
            {% endif %} 
        {% endblock %}" 
        {% if navbar.body_top_padding > 0 %}
            style="padding-top: {{ navbar.body_top_padding }}em !important"
        {% endif %}
    >

    {% block header_navigation %}
        {% include 'partials/navigation.html.twig' %}
    {% endblock %}

    {% block jumbotron %}{% endblock %}

    {% block body %}
        <section id="body">
            {% block content %}{% endblock %}
        </section>
    {% endblock %}

    {% block footer %}
        {% include 'partials/footer.html.twig' %}
    {% endblock %}

    {% if theme_var('map.api_key') and theme_var('map.type') == 'google' %}
        {%  include 'partials/map-google-js.html.twig' %}
    {% elseif theme_var('map.type') == 'osm' %}
        {%  include 'partials/map-osm-js.html.twig' %}
    {% endif %}

    {% block bottom %}
        {{ assets.js('bottom')|raw }}
    {% endblock %}

    </body>
</html>
